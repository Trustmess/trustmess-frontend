import{d as ar}from"../deepmerge/DhIoniG1.js";import{c as K,t as gr,a as Rr,i as Ir}from"../lodash-es/Bw_lT_GB.js";import{r as o}from"../react/-Cgmo2qD.js";import{i as U}from"../react-fast-compare/BRlOzeI3.js";import"../hoist-non-react-statics/CjKdNK1C.js";function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i])}return e},h.apply(this,arguments)}function P(e,t){if(e==null)return{};var u={},i=Object.keys(e),a,f;for(f=0;f<i.length;f++)a=i[f],!(t.indexOf(a)>=0)&&(u[a]=e[a]);return u}var z=o.createContext(void 0);z.displayName="FormikContext";var Pr=z.Provider;z.Consumer;function Fr(){var e=o.useContext(z);return e}var b=function(t){return typeof t=="function"},Y=function(t){return t!==null&&typeof t=="object"},Hr=function(t){return String(Math.floor(Number(t)))===t},ir=function(t){return Object.prototype.toString.call(t)==="[object String]"},Gr=function(t){return o.Children.count(t)===0},nr=function(t){return Y(t)&&b(t.then)};function F(e,t,u,i){i===void 0&&(i=0);for(var a=gr(t);e&&i<a.length;)e=e[a[i++]];return i!==a.length&&!e||e===void 0?u:e}function w(e,t,u){for(var i=Rr(e),a=i,f=0,v=gr(t);f<v.length-1;f++){var S=v[f],m=F(e,v.slice(0,f+1));if(m&&(Y(m)||Array.isArray(m)))a=a[S]=Rr(m);else{var I=v[f+1];a=a[S]=Hr(I)&&Number(I)>=0?[]:{}}}return(f===0?e:a)[v[f]]===u?e:(u===void 0?delete a[v[f]]:a[v[f]]=u,f===0&&u===void 0&&delete i[v[f]],i)}function br(e,t,u,i){u===void 0&&(u=new WeakMap),i===void 0&&(i={});for(var a=0,f=Object.keys(e);a<f.length;a++){var v=f[a],S=e[v];Y(S)?u.get(S)||(u.set(S,!0),i[v]=Array.isArray(S)?[]:{},br(S,t,u,i[v])):i[v]=t}return i}function Wr(e,t){switch(t.type){case"SET_VALUES":return h({},e,{values:t.payload});case"SET_TOUCHED":return h({},e,{touched:t.payload});case"SET_ERRORS":return U(e.errors,t.payload)?e:h({},e,{errors:t.payload});case"SET_STATUS":return h({},e,{status:t.payload});case"SET_ISSUBMITTING":return h({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return h({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return h({},e,{values:w(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return h({},e,{touched:w(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return h({},e,{errors:w(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return h({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return h({},e,{touched:br(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return h({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return h({},e,{isSubmitting:!1});default:return e}}var O={},$={};function jr(e){var t=e.validateOnChange,u=t===void 0?!0:t,i=e.validateOnBlur,a=i===void 0?!0:i,f=e.validateOnMount,v=f===void 0?!1:f,S=e.isInitialValid,m=e.enableReinitialize,I=m===void 0?!1:m,D=e.onSubmit,G=P(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),s=h({validateOnChange:u,validateOnBlur:a,validateOnMount:v,onSubmit:D},G),T=o.useRef(s.initialValues),V=o.useRef(s.initialErrors||O),L=o.useRef(s.initialTouched||$),k=o.useRef(s.initialStatus),g=o.useRef(!1),A=o.useRef({});o.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var q=o.useState(0),J=q[1],W=o.useRef({values:K(s.initialValues),errors:K(s.initialErrors)||O,touched:K(s.initialTouched)||$,status:K(s.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),y=W.current,p=o.useCallback(function(r){var n=W.current;W.current=Wr(n,r),n!==W.current&&J(function(l){return l+1})},[]),lr=o.useCallback(function(r,n){return new Promise(function(l,c){var d=s.validate(r,n);d==null?l(O):nr(d)?d.then(function(E){l(E||O)},function(E){c(E)}):l(d)})},[s.validate]),Q=o.useCallback(function(r,n){var l=s.validationSchema,c=b(l)?l(n):l,d=n&&c.validateAt?c.validateAt(n,r):$r(r,c);return new Promise(function(E,R){d.then(function(){E(O)},function(M){M.name==="ValidationError"?E(Kr(M)):R(M)})})},[s.validationSchema]),or=o.useCallback(function(r,n){return new Promise(function(l){return l(A.current[r].validate(n))})},[]),cr=o.useCallback(function(r){var n=Object.keys(A.current).filter(function(c){return b(A.current[c].validate)}),l=n.length>0?n.map(function(c){return or(c,F(r,c))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(l).then(function(c){return c.reduce(function(d,E,R){return E==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||E&&(d=w(d,n[R],E)),d},{})})},[or]),Ar=o.useCallback(function(r){return Promise.all([cr(r),s.validationSchema?Q(r):{},s.validate?lr(r):{}]).then(function(n){var l=n[0],c=n[1],d=n[2],E=ar.all([l,c,d],{arrayMerge:zr});return E})},[s.validate,s.validationSchema,cr,lr,Q]),_=C(function(r){return r===void 0&&(r=y.values),p({type:"SET_ISVALIDATING",payload:!0}),Ar(r).then(function(n){return g.current&&(p({type:"SET_ISVALIDATING",payload:!1}),p({type:"SET_ERRORS",payload:n})),n})});o.useEffect(function(){v&&g.current===!0&&U(T.current,s.initialValues)&&_(T.current)},[v,_]);var H=o.useCallback(function(r){var n=r&&r.values?r.values:T.current,l=r&&r.errors?r.errors:V.current?V.current:s.initialErrors||{},c=r&&r.touched?r.touched:L.current?L.current:s.initialTouched||{},d=r&&r.status?r.status:k.current?k.current:s.initialStatus;T.current=n,V.current=l,L.current=c,k.current=d;var E=function(){p({type:"RESET_FORM",payload:{isSubmitting:!!r&&!!r.isSubmitting,errors:l,touched:c,status:d,values:n,isValidating:!!r&&!!r.isValidating,submitCount:r&&r.submitCount&&typeof r.submitCount=="number"?r.submitCount:0}})};if(s.onReset){var R=s.onReset(y.values,mr);nr(R)?R.then(E):E()}else E()},[s.initialErrors,s.initialStatus,s.initialTouched,s.onReset]);o.useEffect(function(){g.current===!0&&!U(T.current,s.initialValues)&&I&&(T.current=s.initialValues,H(),v&&_(T.current))},[I,s.initialValues,H,v,_]),o.useEffect(function(){I&&g.current===!0&&!U(V.current,s.initialErrors)&&(V.current=s.initialErrors||O,p({type:"SET_ERRORS",payload:s.initialErrors||O}))},[I,s.initialErrors]),o.useEffect(function(){I&&g.current===!0&&!U(L.current,s.initialTouched)&&(L.current=s.initialTouched||$,p({type:"SET_TOUCHED",payload:s.initialTouched||$}))},[I,s.initialTouched]),o.useEffect(function(){I&&g.current===!0&&!U(k.current,s.initialStatus)&&(k.current=s.initialStatus,p({type:"SET_STATUS",payload:s.initialStatus}))},[I,s.initialStatus,s.initialTouched]);var sr=C(function(r){if(A.current[r]&&b(A.current[r].validate)){var n=F(y.values,r),l=A.current[r].validate(n);return nr(l)?(p({type:"SET_ISVALIDATING",payload:!0}),l.then(function(c){return c}).then(function(c){p({type:"SET_FIELD_ERROR",payload:{field:r,value:c}}),p({type:"SET_ISVALIDATING",payload:!1})})):(p({type:"SET_FIELD_ERROR",payload:{field:r,value:l}}),Promise.resolve(l))}else if(s.validationSchema)return p({type:"SET_ISVALIDATING",payload:!0}),Q(y.values,r).then(function(c){return c}).then(function(c){p({type:"SET_FIELD_ERROR",payload:{field:r,value:F(c,r)}}),p({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Cr=o.useCallback(function(r,n){var l=n.validate;A.current[r]={validate:l}},[]),_r=o.useCallback(function(r){delete A.current[r]},[]),fr=C(function(r,n){p({type:"SET_TOUCHED",payload:r});var l=n===void 0?a:n;return l?_(y.values):Promise.resolve()}),dr=o.useCallback(function(r){p({type:"SET_ERRORS",payload:r})},[]),vr=C(function(r,n){var l=b(r)?r(y.values):r;p({type:"SET_VALUES",payload:l});var c=n===void 0?u:n;return c?_(l):Promise.resolve()}),j=o.useCallback(function(r,n){p({type:"SET_FIELD_ERROR",payload:{field:r,value:n}})},[]),B=C(function(r,n,l){p({type:"SET_FIELD_VALUE",payload:{field:r,value:n}});var c=l===void 0?u:l;return c?_(w(y.values,r,n)):Promise.resolve()}),Er=o.useCallback(function(r,n){var l=n,c=r,d;if(!ir(r)){r.persist&&r.persist();var E=r.target?r.target:r.currentTarget,R=E.type,M=E.name,er=E.id,tr=E.value,Br=E.checked;E.outerHTML;var Tr=E.options,Nr=E.multiple;l=n||M||er,c=/number|range/.test(R)?(d=parseFloat(tr),isNaN(d)?"":d):/checkbox/.test(R)?qr(F(y.values,l),Br,tr):Tr&&Nr?Yr(Tr):tr}l&&B(l,c)},[B,y.values]),X=C(function(r){if(ir(r))return function(n){return Er(n,r)};Er(r)}),N=C(function(r,n,l){n===void 0&&(n=!0),p({type:"SET_FIELD_TOUCHED",payload:{field:r,value:n}});var c=l===void 0?a:l;return c?_(y.values):Promise.resolve()}),pr=o.useCallback(function(r,n){r.persist&&r.persist();var l=r.target,c=l.name,d=l.id;l.outerHTML;var E=n||c||d;N(E,!0)},[N]),Z=C(function(r){if(ir(r))return function(n){return pr(n,r)};pr(r)}),yr=o.useCallback(function(r){b(r)?p({type:"SET_FORMIK_STATE",payload:r}):p({type:"SET_FORMIK_STATE",payload:function(){return r}})},[]),hr=o.useCallback(function(r){p({type:"SET_STATUS",payload:r})},[]),Sr=o.useCallback(function(r){p({type:"SET_ISSUBMITTING",payload:r})},[]),x=C(function(){return p({type:"SUBMIT_ATTEMPT"}),_().then(function(r){var n=r instanceof Error,l=!n&&Object.keys(r).length===0;if(l){var c;try{if(c=Lr(),c===void 0)return}catch(d){throw d}return Promise.resolve(c).then(function(d){return g.current&&p({type:"SUBMIT_SUCCESS"}),d}).catch(function(d){if(g.current)throw p({type:"SUBMIT_FAILURE"}),d})}else if(g.current&&(p({type:"SUBMIT_FAILURE"}),n))throw r})}),Vr=C(function(r){r&&r.preventDefault&&b(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&b(r.stopPropagation)&&r.stopPropagation(),x().catch(function(n){console.warn("Warning: An unhandled error was caught from submitForm()",n)})}),mr={resetForm:H,validateForm:_,validateField:sr,setErrors:dr,setFieldError:j,setFieldTouched:N,setFieldValue:B,setStatus:hr,setSubmitting:Sr,setTouched:fr,setValues:vr,setFormikState:yr,submitForm:x},Lr=C(function(){return D(y.values,mr)}),Dr=C(function(r){r&&r.preventDefault&&b(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&b(r.stopPropagation)&&r.stopPropagation(),H()}),Mr=o.useCallback(function(r){return{value:F(y.values,r),error:F(y.errors,r),touched:!!F(y.touched,r),initialValue:F(T.current,r),initialTouched:!!F(L.current,r),initialError:F(V.current,r)}},[y.errors,y.touched,y.values]),kr=o.useCallback(function(r){return{setValue:function(l,c){return B(r,l,c)},setTouched:function(l,c){return N(r,l,c)},setError:function(l){return j(r,l)}}},[B,N,j]),Or=o.useCallback(function(r){var n=Y(r),l=n?r.name:r,c=F(y.values,l),d={name:l,value:c,onChange:X,onBlur:Z};if(n){var E=r.type,R=r.value,M=r.as,er=r.multiple;E==="checkbox"?R===void 0?d.checked=!!c:(d.checked=!!(Array.isArray(c)&&~c.indexOf(R)),d.value=R):E==="radio"?(d.checked=c===R,d.value=R):M==="select"&&er&&(d.value=d.value||[],d.multiple=!0)}return d},[Z,X,y.values]),rr=o.useMemo(function(){return!U(T.current,y.values)},[T.current,y.values]),Ur=o.useMemo(function(){return typeof S!="undefined"?rr?y.errors&&Object.keys(y.errors).length===0:S!==!1&&b(S)?S(s):S:y.errors&&Object.keys(y.errors).length===0},[S,rr,y.errors,s]),wr=h({},y,{initialValues:T.current,initialErrors:V.current,initialTouched:L.current,initialStatus:k.current,handleBlur:Z,handleChange:X,handleReset:Dr,handleSubmit:Vr,resetForm:H,setErrors:dr,setFormikState:yr,setFieldTouched:N,setFieldValue:B,setFieldError:j,setStatus:hr,setSubmitting:Sr,setTouched:fr,setValues:vr,submitForm:x,validateForm:_,validateField:sr,isValid:Ur,dirty:rr,unregisterField:_r,registerField:Cr,getFieldProps:Or,getFieldMeta:Mr,getFieldHelpers:kr,validateOnBlur:a,validateOnChange:u,validateOnMount:v});return wr}function te(e){var t=jr(e),u=e.component,i=e.children,a=e.render,f=e.innerRef;return o.useImperativeHandle(f,function(){return t}),o.createElement(Pr,{value:t},u?o.createElement(u,t):a?a(t):i?b(i)?i(t):Gr(i)?null:o.Children.only(i):null)}function Kr(e){var t={};if(e.inner){if(e.inner.length===0)return w(t,e.path,e.message);for(var a=e.inner,u=Array.isArray(a),i=0,a=u?a:a[Symbol.iterator]();;){var f;if(u){if(i>=a.length)break;f=a[i++]}else{if(i=a.next(),i.done)break;f=i.value}var v=f;F(t,v.path)||(t=w(t,v.path,v.message))}}return t}function $r(e,t,u,i){u===void 0&&(u=!1);var a=ur(e);return t[u?"validateSync":"validate"](a,{abortEarly:!1,context:a})}function ur(e){var t=Array.isArray(e)?[]:{};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=String(u);Array.isArray(e[i])===!0?t[i]=e[i].map(function(a){return Array.isArray(a)===!0||Ir(a)?ur(a):a!==""?a:void 0}):Ir(e[i])?t[i]=ur(e[i]):t[i]=e[i]!==""?e[i]:void 0}return t}function zr(e,t,u){var i=e.slice();return t.forEach(function(f,v){if(typeof i[v]=="undefined"){var S=u.clone!==!1,m=S&&u.isMergeableObject(f);i[v]=m?ar(Array.isArray(f)?[]:{},f,u):f}else u.isMergeableObject(f)?i[v]=ar(e[v],f,u):e.indexOf(f)===-1&&i.push(f)}),i}function Yr(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function qr(e,t,u){if(typeof e=="boolean")return!!t;var i=[],a=!1,f=-1;if(Array.isArray(e))i=e,f=e.indexOf(u),a=f>=0;else if(!u||u=="true"||u=="false")return!!t;return t&&u&&!a?i.concat(u):a?i.slice(0,f).concat(i.slice(f+1)):i}var Jr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?o.useLayoutEffect:o.useEffect;function C(e){var t=o.useRef(e);return Jr(function(){t.current=e}),o.useCallback(function(){for(var u=arguments.length,i=new Array(u),a=0;a<u;a++)i[a]=arguments[a];return t.current.apply(void 0,i)},[])}function ie(e){var t=e.validate,u=e.name,i=e.render,a=e.children,f=e.as,v=e.component,S=e.className,m=P(e,["validate","name","render","children","as","component","className"]),I=Fr(),D=P(I,["validate","validationSchema"]),G=D.registerField,s=D.unregisterField;o.useEffect(function(){return G(u,{validate:t}),function(){s(u)}},[G,s,u,t]);var T=D.getFieldProps(h({name:u},m)),V=D.getFieldMeta(u),L={field:T,form:D};if(i)return i(h({},L,{meta:V}));if(b(a))return a(h({},L,{meta:V}));if(v){if(typeof v=="string"){var k=m.innerRef,g=P(m,["innerRef"]);return o.createElement(v,h({ref:k},T,g,{className:S}),a)}return o.createElement(v,h({field:T,form:D},m,{className:S}),a)}var A=f||"input";if(typeof A=="string"){var q=m.innerRef,J=P(m,["innerRef"]);return o.createElement(A,h({ref:q},T,J,{className:S}),a)}return o.createElement(A,h({},T,m,{className:S}),a)}var Qr=o.forwardRef(function(e,t){var u=e.action,i=P(e,["action"]),a=u!=null?u:"#",f=Fr(),v=f.handleReset,S=f.handleSubmit;return o.createElement("form",h({onSubmit:S,ref:t,onReset:v,action:a},i))});Qr.displayName="Form";export{te as F,Qr as a,ie as b};
